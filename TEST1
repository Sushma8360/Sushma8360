boolean testResult=True
pipeline{
agent any
parameters {
  string defaultValue: 'PROD', name: 'NAME'
}


environment{
TEST="This is TESTING"
}

stages{

stage('A'){

steps{
try{


echo "PROD ENV"
sh 'exit 1'
}catch(Exception e)
{
echo "PROD ENV FAILED"
testResult=False

}
}

stage('B')
{

environment{
TEST1="THIS IS MANUAL"
}

steps{
script
{
if(testResult==true)
{
echo "$TEST1"
}
}
}
}
}
}

